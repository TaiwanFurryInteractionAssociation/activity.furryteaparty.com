(window.webpackJsonp=window.webpackJsonp||[]).push([[0,10,11,16],{372:function(t,e,n){"use strict";n.r(e);var o=n(132),l=n.n(o),r={props:{type:{type:String,default:"primary"},disabled:{type:Boolean,default:!1}},computed:{computedStyle:function(){return{background:l.a[this.type].background,color:l.a[this.type].color}}},mounted:function(){this.button=this.$refs.button}},c=n(38),component=Object(c.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"position:relative"},[e("button",{ref:"button",staticClass:"b:0 p:8|16 w:100% border-radius:4 cursor:pointer transform:translateY(-2):hover transition:0.2s",style:t.computedStyle,on:{click:function(e){return e.preventDefault(),t.$emit("click")}}},[t._t("default")],2),t._v(" "),t.disabled?e("div",{staticClass:"position:absolute top:0 left:0 w:100% h:100% background:rgba(0,0,0,0.4)"}):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:n(372).default})},382:function(t,e,n){n(105);var o={1:0,2:10,3:29,4:58,5:96,6:143,7:200,8:266,9:341,10:426,11:520,12:623,13:736,14:858,15:990,16:1131,17:1281,18:1441,19:1610,20:1788,21:1976,22:2173,23:2379,24:2595,25:2820,26:3054,27:3298,28:3551,29:3814,30:4086,31:4367,32:4658,33:4958,34:5267,35:5586,36:5914,37:6251,38:6598,39:6954,40:7320,41:7695,42:8079,43:8473,44:8876,45:9288,46:9710,47:10141,48:10581,49:11031,50:11490,51:11958,52:12913,53:13887,54:14880,55:15891,56:16921,57:17970,58:19038,59:20124,60:21229,61:22353,62:23495,63:24656,64:25836,65:27035,66:28252,67:29488,68:30743,69:32016,70:33308,71:34619,72:35949,73:37297,74:38664,75:40050,76:41454,77:42877,78:44319,79:45780,80:47259,81:48757,82:50274,83:51810,84:53364,85:54937,86:56529,87:58139,88:59768,89:61416,90:63083,91:64768,92:66472,93:68195,94:69936,95:71696,96:73475,97:75273,98:77089,99:78924};t.exports={getLevelInfo:function(t){if(null==t)return null;for(var e=99,n=0,l=0;;){var r=o[e+1],c=o[e];if(t>=c){n=t-c,l=r-c,void 0===r&&(l=n);break}e--}return{level:e,currentLevelExp:n,currentLevelCapacity:l}},normalizeImageURL:function(t){return t.startsWith("http://")||t.startsWith("https://")||t.startsWith("data:image/")||t.startsWith("/")?t:"//"+t}}},383:function(t,e,n){"use strict";n.r(e);var o={props:["value"]},l=n(38),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return t.value?e("div",{staticClass:"position:fixed top:0 left:0 w:100vw h:100vh z-index:2 bg:rgba(0,0,0,0.5)"},[e("div",{staticClass:"w:auto h:100% overflow:auto p:32"},[t._t("default")],2)]):t._e()}),[],!1,null,null,null);e.default=component.exports},385:function(t,e,n){"use strict";n.r(e);n(85),n(39),n(11);var o=n(3),l=(n(25),n(50),n(382)),r=n.n(l),c=n(133),d=n(407),v=(n(408),["SWORDSMAN","HEALER","MAGE","ARCHER"]),f={components:{Cropper:d.a},props:["status","mode","isTeamLeader"],computed:{hasImage:function(){var t;return null!=(null===(t=this.status)||void 0===t?void 0:t.ftp_attendee_avatar_url)},frameURL:function(){return this.level<15?"/assets/frames/0-14.png":this.level<30?"/assets/frames/15-29.png":"/assets/frames/30-.png"},imageURL:function(){var t,e;return null!==(t=null===(e=this.status)||void 0===e?void 0:e.ftp_attendee_avatar_url)&&void 0!==t?t:"/assets/logo.webp"},attendeeNo:function(){var t;return null===(t=this.status)||void 0===t?void 0:t.attendee_no},attendeeNickname:function(){var t;return null===(t=this.status)||void 0===t?void 0:t.attendee_nickname},profession:function(){var t,e;return this.$t("activity.enums.profession."+(null!==(t=null===(e=this.status)||void 0===e?void 0:e.ftp_attendee_job_class)&&void 0!==t?t:"none"))},teamName:function(){var t;return null===(t=this.status)||void 0===t?void 0:t.ftp_team_name},teamMembers:function(){var t,e,n;return null!==(t=null===(e=this.status)||void 0===e||null===(n=e.members)||void 0===n?void 0:n.map((function(t){return t.attendee_nickname})))&&void 0!==t?t:[]},teamMemberType:function(){return this.status.ftp_team_member_type},levelInfo:function(){return r.a.getLevelInfo(this.totalExp)},level:function(){var t,e;return null!==(t=null===(e=this.levelInfo)||void 0===e?void 0:e.level)&&void 0!==t?t:0},totalExp:function(){var t;return null===(t=this.status)||void 0===t?void 0:t.attendee_points},exp:function(){var t,e;return null!==(t=null===(e=this.levelInfo)||void 0===e?void 0:e.currentLevelExp)&&void 0!==t?t:0},expCapacity:function(){var t,e;return null!==(t=null===(e=this.levelInfo)||void 0===e?void 0:e.currentLevelCapacity)&&void 0!==t?t:0},energy:function(){var t;return null===(t=this.status)||void 0===t?void 0:t.ftp_attendee_stamina},energyCapacity:function(){return 100}},data:function(){return{loading:!1,uploadModal:{show:!1,file:null,blob:null},deleteConfirmation:{show:!1},jobModal:{show:!1,job:null},PROFESSIONS:v}},methods:{fileSelected:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.next=3,e.$nextTick();case 3:o=t.target.files[0],(l=new FileReader).onload=function(t){e.uploadModal.blob=t.target.result},l.readAsDataURL(o),e.uploadModal.file=o,e.$refs.file.value="",e.loading=!1;case 10:case"end":return n.stop()}}),n)})))()},uploadAvatar:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,canvas,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,n=t.$refs.cropper.getResult(),canvas=n.canvas,e.next=4,new Promise((function(t){var e=canvas.width,n=canvas.height;(e>1024||n>1024)&&(e>n?(n=1024*n/e,e=1024):(e=1024*e/n,n=1024));var o=document.createElement("canvas"),l=o.getContext("2d");o.width=e,o.height=n,l.drawImage(canvas,0,0,e,n),o.toBlob((function(e){t(e)}),"image/jpeg")}));case 4:return o=e.sent,(l=new FormData).append("image",o),e.next=9,t.$axios.post("/api/activity/me/avatar",l).then((function(e){t.$emit("update"),t.uploadModal.show=!1})).catch((function(t){c.a.showRequestError(t)}));case 9:t.loading=!1;case 10:case"end":return e.stop()}}),e)})))()},deleteAvatar:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.delete("/api/activity/me/avatar").then((function(e){t.$emit("update"),t.deleteConfirmation.show=!1})).catch((function(t){c.a.showRequestError(t)}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()},changeJob:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.post("/api/activity/me/job",{ftp_attendee_job_class:t.jobModal.job}).then((function(e){t.$emit("update"),t.jobModal.show=!1})).catch((function(t){c.a.showRequestError(t)}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()}}},m=n(38),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"round border drop-shadow flex p:48 p:32@<md mb:16 bg:white flex flex-direction:column@<md justify-content:space-between align-items:center gap:32|64"},[e("Loading",{model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}}),t._v(" "),e("div",{staticClass:"flex gap:32|64 align-items:center justify-content:center flex-direction:column@<=sm"},["volunteer"!=t.mode?e("div",[e("div",{staticClass:"position:relative"},[e("img",{staticClass:"w:240 h:auto top:168 left:8 object-fit:cover border:2px|solid|lightgray border-radius:4 position:absolute z-index:1",attrs:{src:t.imageURL}}),t._v(" "),e("img",{staticClass:"w:256 h:auto top:0 left:0 object-fit:cover z-index:2 position:relative",attrs:{src:t.frameURL}})])]):t._e(),t._v(" "),e("div",{staticClass:"flex flex-direction:column gap:24 font-size:1.4rem"},[e("span",[t._v(t._s(t.$t("attendee.fields.attendeeNo"))+" : "+t._s(t.attendeeNo))]),t._v(" "),e("span",[t._v(t._s(t.$t("attendee.fields.attendeeNickname"))+" :\n        "+t._s(t.attendeeNickname))]),t._v(" "),"volunteer"!=t.mode?e("span",[t._v(t._s(t.$t("activity.fields.profession"))+" : "+t._s(t.profession))]):t._e(),t._v(" "),null==t.mode?e("span",[t._v(t._s(t.$t("activity.team.fields.teamName"))+" : "+t._s(t.teamName))]):t._e(),t._v(" "),null==t.mode?e("span",[t._v(t._s(t.$t("activity.team.fields.teamMembers"))+" :\n        "+t._s(t.teamMembers.join("、")))]):t._e(),t._v(" "),"team"==t.mode?e("span",[t._v(t._s(t.$t("activity.team.fields.teamMemberType"))+" :\n        "+t._s(t.$t("activity.team.enums.memberType."+t.teamMemberType)))]):t._e(),t._v(" "),t.isTeamLeader?e("span",[e("Button",{on:{click:function(e){return t.$emit("edit",t.status)}}},[t._v("\n          "+t._s(t.$t("activity.team.actions.editMember"))+" ")]),t._v(" \n        "),e("Button",{attrs:{type:"negative"},on:{click:function(e){return t.$emit("remove",t.status)}}},[t._v("\n          "+t._s(t.$t("activity.team.actions.removeMember"))+"\n        ")])],1):t._e(),t._v(" "),e("div",[null==t.mode?e("div",{staticClass:"flex justify-content:space-between mt:8 gap:8 flex-direction:column@<md"},[e("Button",{staticClass:"flex-grow:1 font-size:1rem",on:{click:function(e){t.uploadModal.show=!0,t.uploadModal.file=null,t.uploadModal.blob=null}}},[t._v("\n            "+t._s(t.$t("activity.actions.uploadAvatar"))+"\n          ")]),t._v(" "),t.hasImage?e("Button",{staticClass:"flex-grow:1 font-size:1rem",attrs:{type:"negative"},on:{click:function(e){t.deleteConfirmation.show=!0}}},[t._v("\n            "+t._s(t.$t("activity.actions.deleteAvatar"))+"\n          ")]):t._e()],1):t._e(),t._v(" "),null==t.mode?e("Button",{staticClass:"font-size:1rem mt:8",attrs:{type:"secondary"},on:{click:function(e){t.jobModal.show=!0,t.jobModal.job=t.status.ftp_attendee_job_class}}},[t._v("\n          "+t._s(t.$t("activity.actions.changeJob"))+"\n        ")]):t._e()],1)])]),t._v(" "),"volunteer"!=t.mode?e("div",{staticClass:"flex-grow:1 flex flex-direction:column gap:24 w:100%@<md font-size:1.4rem"},[e("div",{staticClass:"flex flex-direction:column gap:16"},[e("div",{staticClass:"flex justify-content:space-between"},[e("div",{staticClass:"flex flex-direction:column@<md"},[e("span",[t._v(t._s(t.$t("activity.fields.level"))+" : Lv."+t._s(t.level))]),t._v(" "),e("span",[t._v("\n            ("+t._s(t.$t("activity.fields.totalExp"))+": "+t._s(t.totalExp)+")\n          ")])]),t._v(" "),e("div",{staticClass:"display:none@>=md"},[t._v("("+t._s(t.exp)+" / "+t._s(t.expCapacity)+")")])]),t._v(" "),e("div",{staticClass:"w:100% border:1px|solid|black border-radius:2 h:24"},[e("div",{staticClass:"h:100% bg:#F44336",style:{width:t.exp/t.expCapacity*100+"%"}})]),t._v(" "),e("div",{staticClass:"flex justify-content:flex-end display:none@<md"},[t._v("\n        ("+t._s(t.exp)+" / "+t._s(t.expCapacity)+")\n      ")])]),t._v(" "),e("div",{staticClass:"flex flex-direction:column gap:16"},[e("div",{staticClass:"flex justify-content:space-between"},[e("div",[t._v(t._s(t.$t("activity.fields.energy"))+" :")]),t._v(" "),e("div",{staticClass:"display:none@>=md"},[t._v("\n          ("+t._s(t.energy)+" / "+t._s(t.energyCapacity)+")\n        ")])]),t._v(" "),e("div",{staticClass:"w:100% border:1px|solid|black border-radius:2 h:24"},[e("div",{staticClass:"h:100% bg:#FFEB3B",style:{width:t.energy/t.energyCapacity*100+"%"}})]),t._v(" "),e("div",{staticClass:"flex justify-content:flex-end display:none@<md"},[t._v("\n        ("+t._s(t.energy)+" / "+t._s(t.energyCapacity)+")\n      ")])]),t._v(" "),e("Modal",{model:{value:t.uploadModal.show,callback:function(e){t.$set(t.uploadModal,"show",e)},expression:"uploadModal.show"}},[e("div",{staticClass:"round border drop-shadow bg:white p:32|32 flex flex-direction:column gap:16"},[e("div",{staticClass:"font-size:1.6rem font-weight:bold"},[t._v("\n          "+t._s(t.$t("activity.actions.uploadAvatar"))+"\n        ")]),t._v(" "),e("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.fileSelected}}),t._v(" "),e("Button",{on:{click:function(e){return t.$refs.file.click()}}},[t._v("\n          "+t._s(t.$t("activity.actions.selectFile"))+"\n        ")]),t._v(" "),t.uploadModal.blob?e("Cropper",{ref:"cropper",staticClass:"height:60vh",attrs:{src:t.uploadModal.blob,"stencil-props":{aspectRatio:1/1.15}}}):t._e(),t._v(" "),e("div",{staticClass:"flex justify-content:flex-end"},[e("Button",{attrs:{type:"secondary"},on:{click:function(e){t.uploadModal.show=!1}}},[t._v("\n            "+t._s(t.$t("common.actions.cancel"))+" ")]),t._v(" \n\n          "),e("Button",{attrs:{loading:t.loading,disabled:null==t.uploadModal.file},on:{click:t.uploadAvatar}},[t._v("\n            "+t._s(t.$t("common.actions.submit"))+"\n          ")])],1)],1)]),t._v(" "),e("Dialog",{attrs:{title:t.$t("activity.messages.confirmDeleteAvatar"),description:t.$t("activity.messages.confirmDeleteAvatarDescription"),yesText:t.$t("common.actions.delete"),yesType:"negative",noText:t.$t("common.actions.cancel"),noType:"secondary"},on:{yes:t.deleteAvatar,no:function(e){t.deleteConfirmation.show=!1}},model:{value:t.deleteConfirmation.show,callback:function(e){t.$set(t.deleteConfirmation,"show",e)},expression:"deleteConfirmation.show"}}),t._v(" "),e("Modal",{model:{value:t.jobModal.show,callback:function(e){t.$set(t.jobModal,"show",e)},expression:"jobModal.show"}},[e("div",{staticClass:"round border drop-shadow bg:white p:32|32 flex flex-direction:column gap:16"},[e("div",{staticClass:"font-size:1.6rem font-weight:bold"},[t._v("\n          "+t._s(t.$t("activity.actions.changeJob"))+"\n        ")]),t._v(" "),e("div",{staticClass:"font-size:1rem font-weight:bold"},[t._v("\n          "+t._s(t.$t("activity.messages.changeJobDescription"))+"\n        ")]),t._v(" "),e("div",{staticClass:"flex flex-direction:column gap:16"},t._l(t.PROFESSIONS.filter((function(e){var n;return e!=(null===(n=t.status)||void 0===n?void 0:n.ftp_attendee_job_class)})),(function(n){return e("div",{key:n,staticClass:"flex align-items:center gap:16"},[e("Button",{attrs:{type:n==t.jobModal.job?"primary":"secondary"},on:{click:function(e){t.jobModal.job=n}}},[t._v("\n              "+t._s(t.$t("activity.actions.changeTo"))+"\n            ")]),t._v(" "),e("div",[t._v(t._s(t.$t("activity.enums.profession."+n)))])],1)})),0),t._v(" "),e("div",{staticClass:"flex justify-content:flex-end"},[e("Button",{attrs:{type:"secondary"},on:{click:function(e){t.jobModal.show=!1}}},[t._v("\n            "+t._s(t.$t("common.actions.cancel"))+" ")]),t._v(" \n\n          "),e("Button",{attrs:{loading:t.loading},on:{click:t.changeJob}},[t._v("\n            "+t._s(t.$t("common.actions.submit"))+"\n          ")])],1)])])],1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Loading:n(239).default,Button:n(372).default,Modal:n(383).default,Dialog:n(386).default})},386:function(t,e,n){"use strict";n.r(e);n(20),n(41);var o={props:{value:{type:Boolean,default:!1},title:{type:String,default:""},description:{type:String,default:""},yesText:{type:String,default:""},yesType:{type:String,default:"primary"},noText:{type:String,default:""},noType:{type:String,default:"negative"}}},l=n(38),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return t.value?e("div",{staticClass:"position:fixed top:0 left:0 w:100vw h:100vh z-index:2 bg:rgba(0,0,0,0.5) flex flex-center"},[e("div",{staticClass:"round border bg:white min-width:300"},[e("div",{staticClass:"p:16 border-bottom:2px|rgba(0,0,0,0.2)|solid font-size:1.2rem font-weight:bold"},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),e("div",{staticClass:"p:32 border-bottom:2px|rgba(0,0,0,0.2)|solid"},[t._v("\n      "+t._s(t.description)+"\n    ")]),t._v(" "),e("div",{staticClass:"p:16 flex justify-content:flex-end"},[t.noText?e("Button",{staticClass:"mr:8",attrs:{type:t.noType},on:{click:function(e){return t.$emit("no")}}},[t._v("\n        "+t._s(t.noText)+"\n      ")]):t._e(),t._v(" "),t.yesText?e("Button",{attrs:{type:t.yesType},on:{click:function(e){return t.$emit("yes")}}},[t._v("\n        "+t._s(t.yesText)+"\n      ")]):t._e()],1)])]):t._e()}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:n(372).default})}}]);