(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{374:function(t,e,n){"use strict";n.r(e);n(373);var o=n(132),r=n.n(o),l={props:{field:{type:String,default:""},type:{type:String,default:"text"},value:{default:""},placeholder:{type:String,default:""},error:{default:null},required:{type:Boolean,default:!1},maxlength:{type:Number,default:null},disabled:{type:Boolean,default:!1}},mounted:function(){this.input=this.$refs.input},data:function(){return{COLORS:r.a}},computed:{computedStyle:function(){return this.error&&0!=this.error.length?{border:"1px solid #f44336"}:{}}}},c=n(38),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",[t.field?e("div",{staticClass:"my:8 font-weight:bold font-color:gray font-size:1rem"},[t._v("\n    "+t._s(t.field)+" :\n  ")]):t._e(),t._v(" "),e("input",{ref:"input",style:t.computedStyle,attrs:{type:t.type,placeholder:t.placeholder,required:t.required,maxlength:t.maxlength,disabled:t.disabled},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])}),[],!1,null,null,null);e.default=component.exports},440:function(t,e,n){"use strict";n.r(e);n(36),n(19),n(42),n(22),n(17),n(20),n(41),n(43),n(23);var o=n(3),r=(n(39),n(11),n(241),n(25),n(389)),l=n(385),c=n(133);function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,r=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw r}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var k={components:{QrcodeVue:r.a,AttendeeStatus:l.default},data:function(){return{loading:!0,abandonTaskDialog:{show:!1,taskID:null},taskInfoModal:{show:!1,status:null},answerTaskModal:{show:!1,taskID:null,answer:null},tasks:[],items:[],taskStatus:[]}},computed:{},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.commit("app/setTitle",t.$t("activity.tasks.title")),t.getTasks();case 2:case"end":return e.stop()}}),e)})))()},methods:{getTasks:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.get("/api/activity/tasks").then((function(e){t.tasks=e.data.tasks,t.items=e.data.items,t.taskStatus=e.data.taskStatus.filter((function(t){return t.task_id}));var n,o=d(t.taskStatus);try{for(o.s();!(n=o.n()).done;){var r,l=n.value;l.task=t.tasks[l.task_id],l.item=t.items[null===(r=l.task)||void 0===r?void 0:r.ftp_task_reward_item]}}catch(t){o.e(t)}finally{o.f()}t.taskStatus.sort((function(a,b){var t={ACTIVE:1,COMPLETED:2,FAILED:3,ABANDONED:4,CANCELLED:5};return t[a.ftp_task_status]-t[b.ftp_task_status]}))}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()},statusColor:function(t){return{ACTIVE:{color:"rgba(110, 218, 228)",text:"#333"},COMPLETED:{color:"#BBFCC0",text:"rgba(38, 56, 75)"},ABANDONED:{color:"rgba(255, 177, 177)",text:"#333"},CANCELLED:{color:"rgba(167, 146, 123)",text:"#000"},FAILED:{color:"rgba(255, 177, 177)",text:"#333"}}[t]},abandonTask:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.delete("/api/activity/task/".concat(t.abandonTaskDialog.taskID)).then((function(e){c.a.showSnackbar({message:t.$t("activity.tasks.messages.abandonTaskSucceed"),colorType:"positive"}),t.getTasks(),t.abandonTaskDialog.show=!1})).catch((function(t){c.a.showRequestError(t)}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()},submitAnswerTask:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.post("/api/activity/task/".concat(t.answerTaskModal.taskID,"/answer"),{data:t.answerTaskModal.answer}).then((function(e){c.a.showSnackbar({message:t.$t("activity.tasks.messages.answerTaskSucceed"),colorType:"positive"}),t.getTasks(),t.answerTaskModal.show=!1})).catch((function(t){c.a.showRequestError(t)}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()}}},_=n(38),component=Object(_.a)(k,(function(){var t=this,e=t._self._c;return e("div",[e("Loading",{model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}}),t._v(" "),e("div",{staticClass:"display:grid grid-template-columns:1fr|1fr@>sm grid-template-columns:1fr@<=sm gap:32 w:100%"},t._l(t.taskStatus,(function(n){return e("div",{key:n.task_history_id,staticClass:"bg:white p:24 border-radius:4 border drop-shadow flex flex-direction:column justify-content:space-between position:relative w:100% min-w:0"},[e("div",{staticClass:"mb:32"},[e("div",{staticClass:"font-size:1.4rem max-w:100% word-break:break-all"},[t._v("\n          "+t._s(t.$t("activity.enums.tasks."+n.task.task_code))+"\n        ")]),t._v(" "),e("div",{staticClass:"font-size:1rem mt:16 word-break:break-all"},[t._v("\n          "+t._s(t.$t("activity.enums.tasks."+n.task.task_code+"Description")=="activity.enums.tasks."+n.task.task_code+"Description"?"":t.$t("activity.enums.tasks."+n.task.task_code+"Description"))+"\n        ")])]),t._v(" "),e("div",{staticClass:"mt:16 bottom:0 right:0 position:absolute font-weight:bold flex"},["ACTIVE"==n.ftp_task_status&&"INPUTANSWER"==n.task.ftp_task_resolve_method?e("div",{staticClass:"p:8|32|8|16 mr:-16 border-radius:16|0|0|0 bg:#33B5E5 color:#fff p:8|48|8|32:hover transition:0.3s cursor:pointer",on:{click:function(e){t.answerTaskModal.show=!0,t.answerTaskModal.taskID=n.task_id,t.answerTaskModal.answer=""}}},[t._v("\n          "+t._s(t.$t("activity.tasks.actions.answerTask"))+"\n        ")]):t._e(),t._v(" "),e("div",{staticClass:"p:8|32|8|16 mr:-16 border-radius:16|0|0|0 bg:#5C59C1 color:#fff p:8|48|8|32:hover transition:0.3s cursor:pointer",on:{click:function(e){t.taskInfoModal.show=!0,t.taskInfoModal.status=n}}},[t._v("\n          "+t._s(t.$t("activity.tasks.actions.taskInfo"))+"\n        ")]),t._v(" "),"ACTIVE"==n.ftp_task_status?e("div",{staticClass:"p:8|32|8|16 mr:-16 border-radius:16|0|0|0 bg:#F42727 color:#fff p:8|48|8|32:hover transition:0.3s cursor:pointer",on:{click:function(e){t.abandonTaskDialog.show=!0,t.abandonTaskDialog.taskID=n.task_id}}},[t._v("\n          "+t._s(t.$t("activity.tasks.actions.abandonTask"))+"\n        ")]):t._e(),t._v(" "),e("div",{staticClass:"p:8|16 border-radius:12|0|0|0",style:{backgroundColor:t.statusColor(n.ftp_task_status).color,color:t.statusColor(n.ftp_task_status).text}},[t._v("\n          "+t._s(t.$t("activity.tasks.enums.taskStatus."+n.ftp_task_status))+"\n        ")])])])})),0),t._v(" "),e("Dialog",{attrs:{title:t.$t("activity.tasks.messages.confirmAbandonTask"),description:t.$t("activity.tasks.messages.confirmAbandonTaskDescription"),yesText:t.$t("activity.tasks.actions.abandonTask"),yesType:"negative",noText:t.$t("common.actions.cancel"),noType:"secondary"},on:{yes:t.abandonTask,no:function(e){t.abandonTaskDialog.show=!1}},model:{value:t.abandonTaskDialog.show,callback:function(e){t.$set(t.abandonTaskDialog,"show",e)},expression:"abandonTaskDialog.show"}}),t._v(" "),t.taskInfoModal.show?e("Modal",{model:{value:t.taskInfoModal.show,callback:function(e){t.$set(t.taskInfoModal,"show",e)},expression:"taskInfoModal.show"}},[e("div",{staticClass:"round border drop-shadow bg:white p:32|32 flex flex-direction:column gap:16"},[e("div",{staticClass:"font-size:1.6rem font-weight:bold"},[t._v("\n        "+t._s(t.$t("activity.tasks.messages.taskInfo"))+"\n      ")]),t._v(" "),t.taskInfoModal.status.task.ftp_task_icon?e("img",{staticClass:"w:50vh@>sm w:100%@<=sm h:auto p:16",attrs:{src:t.taskInfoModal.status.task.ftp_task_icon}}):t._e(),t._v(" "),e("div",{staticClass:"flex flex-direction:column gap:8 font-size:1.2rem"},[e("div",{staticClass:"align-self:center font-size:1.4rem my:32 word-break:break-all"},[t._v("\n          "+t._s(t.$t("activity.enums.tasks."+t.taskInfoModal.status.task.task_code))+"\n        ")]),t._v(" "),t.taskInfoModal.status.task.ftp_task_consume_stamina?e("div",[t._v("\n          "+t._s(t.$t("activity.tasks.fields.ftp_task_consume_stamina"))+":\n          "+t._s(t.taskInfoModal.status.task.ftp_task_consume_stamina)+"\n        ")]):t._e(),t._v(" "),t.taskInfoModal.status.task.ftp_task_is_group_task?e("div",[t._v("\n          "+t._s(t.$t("activity.tasks.fields.ftp_task_is_group_task"))+":\n          "+t._s(t.$t("common.yes"))+"\n        ")]):t._e(),t._v(" "),t.taskInfoModal.status.task.ftp_task_require_team_size?e("div",[t._v("\n          "+t._s(t.$t("activity.tasks.fields.ftp_task_require_team_size"))+":\n          "+t._s(t.taskInfoModal.status.task.ftp_task_require_team_size)+"\n        ")]):t._e(),t._v(" "),t.taskInfoModal.status.task.ftp_task_require_points?e("div",[t._v("\n          "+t._s(t.$t("activity.tasks.fields.ftp_task_require_points"))+":\n          "+t._s(t.taskInfoModal.status.task.ftp_task_require_points)+"\n        ")]):t._e(),t._v(" "),t.taskInfoModal.status.task.ftp_task_require_job_formation?e("div",[t._v("\n          "+t._s(t.$t("activity.tasks.fields.ftp_task_require_job_formation"))+":\n          "+t._s(t.taskInfoModal.status.task.ftp_task_require_job_formation)+"\n        ")]):t._e(),t._v(" "),e("div",[t._v("\n          "+t._s(t.$t("activity.tasks.fields.ftp_task_resolve_method"))+":\n          "+t._s(t.$t("activity.tasks.enums.resolveMethods."+t.taskInfoModal.status.task.ftp_task_resolve_method))+"\n        ")]),t._v(" "),t.taskInfoModal.status.task.ftp_task_reward_item?e("div",[t._v("\n          "+t._s(t.$t("activity.tasks.fields.ftp_task_reward_item"))+":\n          "+t._s(t.$t("activity.enums.items."+t.taskInfoModal.status.item.ftp_item_system_name)=="activity.enums.items."+t.taskInfoModal.status.item.ftp_item_system_name?t.taskInfoModal.status.item.ftp_item_name:t.$t("activity.enums.items."+t.taskInfoModal.status.item.ftp_item_system_name))+"\n        ")]):t._e()]),t._v(" "),e("div",{staticClass:"flex justify-content:flex-end"},[e("Button",{attrs:{type:"secondary"},on:{click:function(e){t.taskInfoModal.show=!1}}},[t._v("\n          "+t._s(t.$t("common.actions.close"))+"\n        ")])],1)])]):t._e(),t._v(" "),t.answerTaskModal.show?e("Modal",{model:{value:t.answerTaskModal.show,callback:function(e){t.$set(t.answerTaskModal,"show",e)},expression:"answerTaskModal.show"}},[e("div",{staticClass:"round border drop-shadow bg:white p:32|32 flex flex-direction:column gap:16"},[e("div",{staticClass:"font-size:1.6rem font-weight:bold"},[t._v("\n        "+t._s(t.$t("activity.tasks.messages.pleaseInputAnswer"))+"\n      ")]),t._v(" "),e("InputText",{model:{value:t.answerTaskModal.answer,callback:function(e){t.$set(t.answerTaskModal,"answer",e)},expression:"answerTaskModal.answer"}}),t._v(" "),e("div",{staticClass:"flex justify-content:flex-end"},[e("Button",{attrs:{type:"secondary"},on:{click:function(e){t.answerTaskModal.show=!1}}},[t._v("\n          "+t._s(t.$t("common.actions.cancel"))+"\n        ")]),t._v(" "),e("Button",{staticClass:"ml:16",attrs:{type:"primary"},on:{click:t.submitAnswerTask}},[t._v("\n          "+t._s(t.$t("common.actions.submit"))+"\n        ")])],1)],1)]):t._e()],1)}),[],!1,null,"1e326368",null);e.default=component.exports;installComponents(component,{Loading:n(239).default,Dialog:n(386).default,Button:n(372).default,Modal:n(383).default,InputText:n(374).default})}}]);